<!DOCTYPE html>
<!-- 
①直したいこと
 ・画面の一番上に「>>」の表示が出てしまっている。
 ・cssでデザインつける。
②理解できていないこと
　・length_chkの働きがちゃんと理解してない -->

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="theme-color" content="#000000">
  <link rel="stylesheet" href="styles.css">
</head>

<body>
 <title>会員登録画面</title>

 <button type="button" class="ログイン">ログイン</button>
 <button type="button" class="新規登録">新規登録</button>

 <form method="post" action="/Users/akari/Team-A/Team-A/sample_server/product/プロフィール画面/profile.html">
   <table width="1000" border="0">
    <!-- maxlengthは最大入力文字数で、今回は適当です。 -->
    <tr>
      <th>メールアドレス</th>
      <th><input type="text" maxlength="254" placeholder="aaaa@gmail.com" id="mail" class = "put"></th>
      <th id = "mail_chk" style="display: none; color: red;">メールアドレスが形式に沿っていません</th>
    </tr>

    <tr>
      <th>パスワード</th>
      <th><input type="password" maxlength="20" placeholder="半角英数8文字以上"id ="pass" class = "put"></th>>
      <th id = "pass_chk" style="display: none; color: red;">パスワードが半角英数8文字以上になっていません</th>
    </tr>
  
    <tr>
      <th>パスワード再入力</th>
      <th><input type="password" maxlength="20" placeholder="半角英数8文字以上" id="repass" class = "put"></th>>
      <th id = "repass_chk" style="display: none; color: rgb(255, 160, 160);">パスワードが登録時と異なっています</th>
    </tr>
   </table>

    <br/>
    <div class = "botton">
      <input type="submit" id="touroku" >

    </div>

    <script>
     document.getElementById("touroku").onclick = function() {
      const mail = document.getElementById("mail").value;
      const pass = document.getElementById("pass").value;
      const repass = document.getElementById("repass").value;

      // メールアドレス、パスワード、パスワード再入力のinputに記入されていないときに”必須項目の未記入があります！”を表示
      let length = 0;
      if (mail.length == 0) {length = 1};
      if (pass.length == 0) {length = 1};
      if (repass.length == 0) {length = 1};
      if (length == 1){alert("必須項目の未記入があります！");
          return false;
         } else{
            length_chk = 0; //これは何をしてる？？
      };

      //メール入力時に英数字＋＠を使っているか確認。使っていない場合は”メールアドレスが形式に沿っていません”と表示。
      let checkMail = /^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/;
        if(checkMail.test(mail) != true){
         document.getElementById('mail_chk').style.display = "block"; length_chk = 1; 
          } else { 
            document.getElementById('mail_chk').style.display = "none";
      }

      
      //パスワード入力時に半角英数8文字以上か確認。もし半角英数8文字以上でなかったら”パスワードが半角英数8文字以上になっていません”と表示。
      let checkPass = /^([a-zA-Z0-9]{8,})$/;
        if(checkPass.test(pass) != true){ 
         document.getElementById('pass_chk').style.display = "block"; length_chk = 1; 
       } else { 
          document.getElementById('pass_chk').style.display = "none";  
         }
       //パスワード再入力時に上のパスワードと異なっていたら”パスワードが登録時と異なっています”と表示される。 
        if(pass != repass){ 
         document.getElementById('repass_chk').style.display = "block"; length_chk = 1; }
        else{ document.getElementById('repass_chk').style.display = "none";
       }; 

       //これは何をしている？→→→ ↓があると赤文字も表示が継続される。
       if(length_chk == 1){ 
         return false;
       } else { 
         return true };
      
     }
   

    </script>
 </form>

</body>
 
</html>